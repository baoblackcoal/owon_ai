# **OWON AI 助手 - 问答集功能需求文档**

## 1. 功能概述

"问答集"是一个动态、可交互的知识库中心，取代了原有的单一“排行榜”概念。它旨在汇总、分类并展示所有高质量的问答内容，用户可以通过强大的搜索、过滤和排序功能，快速、精准地找到所需的技术解决方案和产品信息。该功能是连接用户、知识和产品的核心枢纽。

## 2. 目标用户

- **普通用户（游客与注册用户）**: 通过搜索和过滤，高效解决具体问题；通过浏览热门和最佳问答，学习和发现产品知识。
- **管理员/运营团队**: 管理知识分类体系（分类、机型、标签），监控用户关注点，分析数据以优化产品文档和支持策略。

## 3. 功能需求详述

### 3.1. 核心交互功能

#### 3.1.1. 搜索功能
- **全局搜索框**: 在问答集页面顶部提供一个醒目的搜索框。
- **搜索范围**: 搜索应覆盖问题标题、问题内容、答案内容以及相关标签。
- **实时反馈**: (可选) 实现搜索词输入时的即时建议或结果预览。

#### 3.1.2. 过滤系统
用户可以组合使用以下一个或多个过滤器来缩小问题列表的范围：
- **分类 (Category)**: 按产品大类进行过滤。
  - **实现方式**: 以标签或下拉菜单形式提供。
  - **示例**: `示波器`, `信号发生器`, `万用表`, `电源`等。
- **系列机型 (Product Series/Model)**: 按具体的产品系列或型号进行过滤。
  - **实现方式**: 级联选择或带搜索功能的下拉菜单。
  - **示例**: `ADS800A`, `ADS900A`, `XDS3000`等。
- **标签 (Tags)**: 按功能、技术点或问题属性进行过滤。
  - **实现方式**: 可多选的标签云或标签列表。
  - **示例**: `测量`, `触发`, `光标`, `FFT`, `XY`, `固件升级`, `PC软件`等。

#### 3.1.3. 排序与视图
在过滤结果的基础上，用户可以通过切换Tab或视图来对问题进行排序：
- **最新 (Latest)**:
  - **排序规则**: 按问题的创建时间降序排列，最新的在前。
  - **用途**: 方便用户查看社区的最新动态和新增问题。
- **最佳 (Best)**:
  - **排序规则**: 按问题的累计“点赞数 (👍)”降序排列，点赞最多的在前。
  - **用途**: 帮助用户快速找到经过社区验证的高质量、高认可度的答案。
- **排行 (Ranking)**:
  - **排序规则**: 按问题的累计“观看量 (Views)”降序排列，观看量最高的在前。
  - **时间范围选择**: 此视图下必须提供一个时间范围选择器（如下拉菜单），允许用户查看不同时间段内的排行：
    - `本周`
    - `本月`
    - `本季度`
    - `本年`
    - `总排行`
  - **用途**: 洞察在特定时期内最受关注的热点问题。

### 3.2. 列表与数据展示
- **列表项**: 每个问题在列表中应展示：
  - 问题标题
  - 关键指标：`回复数`, `观看量`, `点赞数`。
  - 相关标签和分类。
  - 最新活动时间。
- **详情页**: 点击问题进入详情页，展示完整的问答对话。

### 3.3. 管理员后台功能
- **分类管理**: 增、删、改、查产品分类。
- **系列机型管理**: 增、删、改、查系列机型，并可与“分类”关联。
- **标签管理**: 增、删、改、查标签，查看各标签下的问题数量。
- **问答管理**: 管理员可以为问题添加或移除标签、分类和机型，以保证知识库的整洁和准确。

## 4. 数据库设计要点
- **`questions` 表**:
  - `id`, `title`, `content`, `created_at`
  - `category_id` (ForeignKey to `categories`)
  - `product_model_id` (ForeignKey to `product_models`)
  - `views_count` (Integer, default 0)
  - `likes_count` (Integer, default 0, denormalized for performance)
- **`categories` 表**:
  - `id`, `name`, `description`
- **`product_models` 表**:
  - `id`, `name`, `category_id` (ForeignKey to `categories`)
- **`tags` 表**:
  - `id`, `name`
- **`question_tags` (中间表)**:
  - `question_id`, `tag_id`
- **`likes` 表**:
  - `id`, `question_id` (或 `answer_id`), `user_id`, `created_at`

## 5. API 设计要点

- **`GET /api/qna`**:
  - **功能**: 获取问答集列表的核心接口。
  - **参数**:
    - `search`: 搜索关键词 (string)
    - `category`: 分类ID (integer)
    - `model`: 机型ID (integer)
    - `tags`: 标签ID列表，逗号分隔 (string, e.g., "1,5,12")
    - `sort_by`: 排序方式 (`latest`, `best`, `ranking`)
    - `period`: 时间周期，当 `sort_by=ranking` 时生效 (`week`, `month`, `quarter`, `year`, `all`)
  - **返回**: 分页的问答列表。
- **`GET /api/filters`**:
  - **功能**: 获取所有可用的过滤器选项。
  - **返回**: `{ "categories": [...], "models": [...], "tags": [...] }`，用于前端动态生成过滤菜单。

## 6. 非功能性需求

- **性能**: 复杂的过滤和排序查询响应时间应在1秒以内。需要对数据库查询进行优化，并可能使用缓存。
- **可用性**: 过滤和排序控件必须直观易用，在移动设备上也要有良好的体验。
- **数据准确性**: 观看量、点赞数等统计数据必须准确。观看量应有防刷机制（如限制同一用户短时间内的重复计数）。 